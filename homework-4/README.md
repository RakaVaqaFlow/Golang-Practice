# –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ
 
## –ó–∞–¥–∞—á–∞: 
–æ–±—Ä–∞–±–æ—Ç–∞—Ç—å N-–∑–∞–∫–∞–∑–æ–≤ M-–≤–æ—Ä–∫–µ—Ä–∞–º–∏ —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ Pipeline –∏ WorkerPool.
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã N >= 5 –∏ M >= 2 –∑–∞–¥–∞—é—Ç—Å—è –∫–∞–∫ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏.

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–∫–∞–∑–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –ø–æ–ª–µ–π:
- ID —Ç–æ–≤–∞—Ä–∞
- ID —Å–∫–ª–∞–¥–∞
- ID –ø—É–Ω–∫—Ç–∞ –≤—ã–¥–∞—á–∏ –∑–∞–∫–∞–∑–∞
- ID –≤–æ—Ä–∫–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Ä–∞–±–æ—Ç–∞–ª –∑–∞–∫–∞–∑
- –ú–∞—Å—Å–∏–≤ —Å–æ—Å—Ç–æ—è–Ω–∏–π, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –Ω–∞—Ö–æ–¥–∏–ª—Å—è –∑–∞–∫–∞–∑ –≤ —Ä–∞–º–∫–∞—Ö –ø–∞–π–ø–ª–∞–π–Ω–∞

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–∫–∞–∑–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –ø–æ–ª–µ–π:
- –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ: [–°–æ–∑–¥–∞–Ω, –û–±—Ä–∞–±–æ—Ç–∞–Ω, –í—ã–ø–æ–ª–Ω–µ–Ω]
- –í—Ä–µ–º—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –¥–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

–ö–∞–∂–¥–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è —à–∞–≥–æ–º –ø–∞–π–ø–ª–∞–π–Ω–∞.
–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–∞–π–ø–ª–∞–π–Ω–∞:
- –ö–∞–Ω–∞–ª, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∑–∞–∫–∞–∑–æ–≤ —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª–µ–º ID —Ç–æ–≤–∞—Ä–∞

–®–∞–≥ "–°–æ–∑–¥–∞–Ω" –ø–∞–π–ø–ª–∞–π–Ω–∞:
- –í –º–∞—Å—Å–∏–≤ —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ "–°–æ–∑–¥–∞–Ω"

–®–∞–≥ "–û–±—Ä–∞–±–æ—Ç–∞–Ω" –ø–∞–π–ø–ª–∞–π–Ω–∞:
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å–∫–ª–∞–¥ –¥–ª—è –∑–∞–∫–∞–∑–∞ - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∑—è—Ç–∏—è ID —Ç–æ–≤–∞—Ä–∞ –ø–æ –º–æ–¥—É–ª—é 2
- –í –º–∞—Å—Å–∏–≤ —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ "–û–±—Ä–∞–±–æ—Ç–∞–Ω"

–®–∞–≥ "–ó–∞–≤–µ—Ä—à–µ–Ω" –ø–∞–π–ø–ª–∞–π–Ω–∞:
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—É–Ω–∫—Ç –≤—ã–¥–∞—á–∏ –∑–∞–∫–∞–∑–∞ - —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å—É–º–º—ã ID —Ç–æ–≤–∞—Ä–∞ –∏ ID —Å–∫–ª–∞–¥–∞
- –í –º–∞—Å—Å–∏–≤ —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ "–ó–∞–≤–µ—Ä—à–µ–Ω"

–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–Ω–∞–ª–∞ —Å –∑–∞–∫–∞–∑–∞–º–∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è M-–≤–æ—Ä–∫–µ—Ä–∞–º–∏.
–í—Å–µ —à–∞–≥–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –≤–æ—Ä–∫–µ—Ä–∞.
–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞ –∫–∞–∂–¥–æ–º—É –∑–∞–∫–∞–∑—É –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è ID –≤–æ—Ä–∫–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –µ–≥–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç.
–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –∑–∞–∫–∞–∑ –ø—Ä–æ—à–µ–ª –≤—Å–µ —Å—Ç–∞–¥–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–¥–∞—Ç—å –∑–∞–∫–∞–∑ –≤ –∫–∞–Ω–∞–ª —Å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º–∏ –∑–∞–∫–∞–∑–∞–º–∏.

–û—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞–µ—Ç –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ç–æ–∫ –≤—ã–≤–æ–¥–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∑–∞–∫–∞–∑–∞.

üíé –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã FanIn/FanOut –¥–ª—è —à–∞–≥–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∑–∞–∫–∞–∑–∞ 

## –†–µ—à–µ–Ω–∏–µ:

–ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

```
homework-4
‚îú‚îÄ‚îÄ‚îÄcmd
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄgateway
‚îÇ       ‚îú‚îÄ‚îÄ‚îÄbase
‚îÇ       ‚îú‚îÄ‚îÄ‚îÄworker_pool_pipeline
‚îÇ       ‚îî‚îÄ‚îÄ‚îÄworker_pool_pipeline_fan
‚îî‚îÄ‚îÄ‚îÄinternal
    ‚îú‚îÄ‚îÄ‚îÄconfig
    ‚îú‚îÄ‚îÄ‚îÄmodel
    ‚îî‚îÄ‚îÄ‚îÄpkg
        ‚îú‚îÄ‚îÄ‚îÄgateway
        ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄsteps
        ‚îÇ       ‚îú‚îÄ‚îÄ‚îÄcomplete
        ‚îÇ       ‚îú‚îÄ‚îÄ‚îÄcreate
        ‚îÇ       ‚îî‚îÄ‚îÄ‚îÄprocess
        ‚îî‚îÄ‚îÄ‚îÄproducer
```

–í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ ```cmd\gateway``` —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã:
- ```base\main.go``` ‚Äî –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –∑–∞–∫–∞–∑–æ–≤ –≤ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ –æ–¥–Ω–∏–º worker'–æ–≤. 

    *–î–ª—è –∑–∞–ø—É—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:* 
    
    ```go run .\cmd\gateway\base\main.go ```
- ```worker_pool_pipeline\worker_pool_pipeline.go``` ‚Äî –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –∑–∞–∫–∞–∑–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ WorkerPool –∏ Pipeline. 

    *–î–ª—è –∑–∞–ø—É—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:*
    
    ```go run .\cmd\gateway\worker_pool_pipeline\worker_pool_pipeline.go ``` 
- ```worker_pool_pipeline_fan\worker_pool_pipeline_fan.go``` ‚Äî –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –∑–∞–∫–∞–∑–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ WorkerPool, Pipeline –∏ FanIn/FanOut. 

    *–î–ª—è –∑–∞–ø—É—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:*
    
    ```go run .\cmd\gateway\worker_pool_pipeline_fan\worker_pool_pipeline_fan.go ``` 

–í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ ```internal``` —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã:
- ```config\config.go``` ‚Äî —Ñ–∞–π–ª, –≤ –∫–æ—Ç–æ—Ä–æ–º –∑–∞–¥–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ worker'–æ–≤ –∏ –≤—Ä–µ–º—è –∑–∞–¥–µ—Ä–∂–∫–∏ —ç—Ç–∞–ø–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö. 
    + –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ worker'–æ–≤, –ø—Ä–∏—Å–≤–æ–π—Ç–µ –∂–µ–ª–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–µ ```NumberOfWorkers```, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–≤–Ω–æ 3. 
    + –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤, –ø—Ä–∏—Å–≤–æ–π—Ç–µ –∂–µ–ª–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–µ ```NumberOfOrders```, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–≤–Ω–æ 5. 
    + –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è –∑–∞–¥–µ—Ä–∂–∫–∏ —ç—Ç–∞–ø–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–∞, –ø—Ä–∏—Å–≤–æ–π—Ç–µ –∂–µ–ª–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–µ ```ProcessStepDuration```, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–∞–¥–µ—Ä–∂–∫–∞ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 2 —Å–µ–∫—É–Ω–¥—ã.

- ```model\order.go``` ‚Äî –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑–∞–∫–∞–∑–∞ ```Order```, –∞ —Ç–∞–∫ –∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω–≤–µ—Ä—Ç–æ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã ```Order``` –≤ —Å—Ç—Ä–æ–∫—É –≤ JSON-—Ñ–æ—Ä–º–∞—Ç–µ –∏ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –≤—ã–≤–æ–¥–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ –∏–∑ –∫–∞–Ω–∞–ª–∞ ```ordersCompleted```.  
- ```pkg``` ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã 
    + –±–∞–∑–æ–≤–æ–≥–æ —Å–ª—É—á–∞—è (–º–µ—Ç–æ–¥ ```Process``` —Å—Ç—Ä—É–∫—Ç—É—Ä—ã ```Implementation``` –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–∞ ```gateway.go```)
    + WorkerPool –∏ Pipeline –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ (–º–µ—Ç–æ–¥ ```Pipeline``` —Å—Ç—Ä—É–∫—Ç—É—Ä—ã ```Implementation``` –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–∞ ```gateway.go```)
    + WorkerPool, Pipeline –∏ FanIn/FanOut –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ (–º–µ—Ç–æ–¥ ```PipelineFan``` —Å—Ç—Ä—É–∫—Ç—É—Ä—ã ```Implementation``` –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–∞ ```gateway.go```)
    + ```steps``` ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫—É —Å–æ–∑–¥–∞–Ω–∏—è, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞

–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –∫–∞–∂–¥–æ–≥–æ –∏–∑ —Å–ª—É—á–∞–µ–≤ –ø—Ä–∏ ```NumberOfOrders=5```,  ```NumberOfWorkers=3``` –∏ ```ProcessStepDuration=2```
- base case c 1 worker'–æ–º: 10.026794s
- WorkerPool –∏ Pipeline: 4.010462s
- WorkerPool, Pipeline –∏ FanIn/FanOut: 4.019380s

–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –∫–∞–∂–¥–æ–≥–æ –∏–∑ —Å–ª—É—á–∞–µ–≤ –ø—Ä–∏ ```NumberOfOrders=100```, ```NumberOfWorkers=5``` –∏ ```ProcessStepDuration=2```
- base case c 1 worker'–æ–º: 200.747155s
- WorkerPool –∏ Pipeline: 40.169833s
- WorkerPool, Pipeline –∏ FanIn/FanOut: 14.098333s

–ü—Ä–∏ –±–æ–ª—å—à–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∑–∞–∫–∞–∑–æ–≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∞—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º WorkerPool, Pipeline –∏ FanIn/FanOut –æ–∫–∞–∑–∞–ª–∞—Å—å –Ω–∞–∏–±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –≤ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ —Å WorkerPool –∏ Pipeline. 

–†–µ—à–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–ª–æ—Å—å –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏:
- –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ Windows 11 Pro 21H2
- –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä Intel(R) Core(TM) i5-8300H CPU @ 2.30GHz 
- –û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å 16,0 –ì–ë
–û–¥–Ω–∞–∫–æ —ç—Ç–æ –¥–∞–ª–µ–∫–æ –Ω–µ –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –æ—Ç –∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–≤–∏—Å–∏—Ç –≤—Ä–µ–º—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è. 